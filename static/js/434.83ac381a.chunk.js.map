{"version":3,"file":"static/js/434.83ac381a.chunk.js","mappings":"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","sources":["webpack://sandbox/./src/pages/ChatPage/ChatPage.module.css?88db","pages/ChatPage/ChatPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"chatPage\":\"ChatPage_chatPage__yEme2\",\"messageList\":\"ChatPage_messageList__pG9D1\",\"outbox\":\"ChatPage_outbox__qaoCU\",\"inbox\":\"ChatPage_inbox__oxI9J\",\"ownerName\":\"ChatPage_ownerName__iZifK\",\"msgOutboxContent\":\"ChatPage_msgOutboxContent__2hPta\",\"timestampOutbox\":\"ChatPage_timestampOutbox__eEih5\",\"msgInboxContent\":\"ChatPage_msgInboxContent__rGXUo\",\"timestampInbox\":\"ChatPage_timestampInbox__EChid\",\"sendMsgCont\":\"ChatPage_sendMsgCont__gCZXa\",\"sendMsgInput\":\"ChatPage_sendMsgInput__2pJuU\",\"writeMsgButton\":\"ChatPage_writeMsgButton__UWYJz\",\"paperClipIcon\":\"ChatPage_paperClipIcon__b6Umr\",\"smileIcon\":\"ChatPage_smileIcon__U6la2\",\"sendIcon\":\"ChatPage_sendIcon__MJcgz\",\"sendMsgButton\":\"ChatPage_sendMsgButton__kraaH\"};","import React, { useState, useRef } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { updateChat } from \"../../redux/public/chatsSlice\";\nimport { useParams } from \"react-router-dom\";\nimport { useChats } from \"../../hooks/useChats\";\nimport Input from \"../../components/commonComponents/Input/Input\";\n\nimport { FaPaperclip, FaRegSmile, FaPaperPlane } from \"react-icons/fa\";\nimport EmojiPicker from \"emoji-picker-react\";\n\nimport styles from \"./ChatPage.module.css\";\n\nexport default function ChatPage() {\n  const { chatId } = useParams();\n  const { chats } = useChats();\n  const dispatch = useDispatch();\n\n  const [message, setMessage] = useState(\"\");\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const fileInputRef = useRef();\n\n  const selectedChat = chats.find((chat) => chat.id === chatId);\n\n  if (!selectedChat) {\n    return <div className={styles.notFound}>Chat not found</div>;\n  }\n\n  const formatTimestamp = (timestamp) => {\n    let date = new Date(timestamp);\n    if (isNaN(date.getTime())) {\n      const fixedTimestamp = timestamp.replace(\n        /(\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}):(\\d{2})\\.(\\d{3})Z$/,\n        \"$1:59.$3Z\"\n      );\n      date = new Date(fixedTimestamp);\n    }\n    if (isNaN(date.getTime())) return \"\";\n\n    if (date.getSeconds() > 59) date.setSeconds(59);\n\n    const formattedTime = date.toLocaleTimeString([], {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n\n    const day = date.getDate();\n    const month = date.toLocaleString(\"default\", { month: \"long\" });\n    const year = date.getFullYear();\n\n    return `${day}${month}${year} ${formattedTime}`;\n  };\n\n  const handleSendMsg = () => {\n    if (!message.trim()) return;\n\n    dispatch(\n      updateChat({\n        chatId,\n        newMessages: [\n          {\n            id: crypto.randomUUID(),\n            content: message,\n            isInbox: false,\n            sentAt: new Date().toISOString(),\n          },\n        ],\n      })\n    );\n    setMessage(\"\");\n    setShowEmojiPicker(false);\n  };\n\n  const handleAttachClick = () => {\n    fileInputRef.current.click();\n  };\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      console.log(\"Selected file:\", file);\n      // Upload logic or preview logic goes here\n    }\n  };\n\n  const toggleEmojiPicker = () => {\n    setShowEmojiPicker((prev) => !prev);\n  };\n\n  const handleEmojiClick = (emojiData) => {\n    setMessage((prev) => prev + emojiData.emoji);\n  };\n\n  return (\n    <div className={styles.chatPage}>\n      <ul className={styles.messageList}>\n        {selectedChat.messages.map((msg) =>\n          msg.isInbox ? (\n            <li key={msg.id} className={styles.outbox}>\n              <span className={styles.ownerName}>Radu Bogdan</span>\n              <span className={styles.msgOutboxContent}>{msg.content}</span>\n              <span className={styles.timestampOutbox}>\n                {msg.sentAt\n                  ? formatTimestamp(msg.sentAt)\n                  : \"Time not available\"}\n              </span>\n            </li>\n          ) : (\n            <li key={msg.id} className={styles.inbox}>\n              <span className={styles.msgInboxContent}>{msg.content}</span>\n              <span className={styles.timestampInbox}>\n                {msg.sentAt\n                  ? formatTimestamp(msg.sentAt)\n                  : \"Time not available\"}\n              </span>\n            </li>\n          )\n        )}\n      </ul>\n\n      <div className={styles.sendMsgCont}>\n        <Input\n          width={\"100%\"}\n          className={styles.sendMsgInput}\n          paddingLeft={\"20px\"}\n          placeholder={\"Type something here...\"}\n          value={message}\n          handleChange={(e) => setMessage(e.target.value)}\n        >\n          <button\n            type=\"button\"\n            className={styles.writeMsgButton}\n            onClick={handleAttachClick}\n          >\n            <FaPaperclip className={styles.paperClipIcon} size={18} />\n          </button>\n          <input\n            type=\"file\"\n            ref={fileInputRef}\n            onChange={handleFileChange}\n            style={{ display: \"none\" }}\n          />\n\n          <div className={styles.emojiWrapper}>\n            <button\n              type=\"button\"\n              className={styles.writeMsgButton}\n              onClick={() => {\n                toggleEmojiPicker();\n                console.log(\"click\");\n              }}\n            >\n              <FaRegSmile className={styles.smileIcon} size={18} />\n            </button>\n            {showEmojiPicker && (\n              <div className={styles.emojiPicker}>\n                <EmojiPicker onEmojiClick={handleEmojiClick} />\n              </div>\n            )}\n          </div>\n        </Input>\n\n        <button className={styles.sendMsgButton} onClick={handleSendMsg}>\n          <FaPaperPlane className={styles.sendIcon} size={24} />\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":["ChatPage","chatId","useParams","chats","useChats","dispatch","useDispatch","message","setMessage","useState","showEmojiPicker","setShowEmojiPicker","fileInputRef","useRef","selectedChat","find","chat","id","_jsx","className","styles","notFound","children","formatTimestamp","timestamp","date","Date","isNaN","getTime","fixedTimestamp","replace","getSeconds","setSeconds","formattedTime","toLocaleTimeString","hour","minute","getDate","toLocaleString","month","getFullYear","_jsxs","chatPage","messageList","messages","map","msg","isInbox","outbox","ownerName","msgOutboxContent","content","timestampOutbox","sentAt","inbox","msgInboxContent","timestampInbox","sendMsgCont","Input","width","sendMsgInput","paddingLeft","placeholder","value","handleChange","e","target","type","writeMsgButton","onClick","handleAttachClick","current","click","FaPaperclip","paperClipIcon","size","ref","onChange","file","files","console","log","style","display","emojiWrapper","prev","FaRegSmile","smileIcon","emojiPicker","EmojiPicker","onEmojiClick","emojiData","emoji","sendMsgButton","handleSendMsg","trim","updateChat","newMessages","crypto","randomUUID","toISOString","FaPaperPlane","sendIcon"],"sourceRoot":""}