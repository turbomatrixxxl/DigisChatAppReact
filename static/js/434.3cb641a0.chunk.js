"use strict";(self.webpackChunksandbox=self.webpackChunksandbox||[]).push([[434],{434:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(43),n=a(3),i=a(140),o=a(216),c=a(381),l=a(461),r=a(204),m=a(258);const g={chatPage:"ChatPage_chatPage__yEme2",messageList:"ChatPage_messageList__pG9D1",outbox:"ChatPage_outbox__qaoCU",inbox:"ChatPage_inbox__oxI9J",ownerName:"ChatPage_ownerName__iZifK",msgOutboxContent:"ChatPage_msgOutboxContent__2hPta",timestampOutbox:"ChatPage_timestampOutbox__eEih5",msgInboxContent:"ChatPage_msgInboxContent__rGXUo",timestampInbox:"ChatPage_timestampInbox__EChid",sendMsgCont:"ChatPage_sendMsgCont__gCZXa",sendMsgInput:"ChatPage_sendMsgInput__2pJuU",writeMsgButton:"ChatPage_writeMsgButton__UWYJz",paperClipIcon:"ChatPage_paperClipIcon__b6Umr",smileIcon:"ChatPage_smileIcon__U6la2",sendIcon:"ChatPage_sendIcon__MJcgz",sendMsgButton:"ChatPage_sendMsgButton__kraaH",emojiWrapper:"ChatPage_emojiWrapper__3QUTM",emojiPicker:"ChatPage_emojiPicker__WVEAX",emojiPickerWrapper:"ChatPage_emojiPickerWrapper__MRts-",filePreview:"ChatPage_filePreview__C7CxY",imagePreview:"ChatPage_imagePreview__WCelK"};var d=a(579);function h(){const{chatId:e}=(0,o.g)(),{chats:t}=(0,c.R)(),a=(0,n.wA)(),[h,_]=(0,s.useState)(""),[u,p]=(0,s.useState)(!1),[x,C]=(0,s.useState)(null),P=(0,s.useRef)(),j=t.find((t=>t.id===e));if(!j)return(0,d.jsx)("div",{className:g.notFound,children:"Chat not found"});const b=e=>{let t=new Date(e);if(isNaN(t.getTime())){const a=e.replace(/(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}):(\d{2})\.(\d{3})Z$/,"$1:59.$3Z");t=new Date(a)}if(isNaN(t.getTime()))return"";t.getSeconds()>59&&t.setSeconds(59);const a=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`${t.getDate()} ${t.toLocaleString("default",{month:"long"})} ${t.getFullYear()}-${a}`};return(0,d.jsxs)("div",{className:g.chatPage,children:[(0,d.jsxs)("ul",{className:g.messageList,children:[j.messages.map((e=>e.isInbox?(0,d.jsxs)("li",{className:g.outbox,children:[(0,d.jsx)("span",{className:g.ownerName,children:"Radu Bogdan"}),(0,d.jsx)("span",{className:g.msgOutboxContent,children:e.content}),(0,d.jsx)("span",{className:g.timestampOutbox,children:e.sentAt?b(e.sentAt):"Time not available"})]},e.id):(0,d.jsxs)("li",{className:g.inbox,children:[(0,d.jsx)("span",{className:g.msgInboxContent,children:e.content}),(0,d.jsx)("span",{className:g.timestampInbox,children:e.sentAt?b(e.sentAt):"Time not available"})]},e.id))),x&&(0,d.jsx)("li",{className:g.filePreview,children:x.type.startsWith("image/")?(0,d.jsx)("img",{src:URL.createObjectURL(x),alt:"File Preview",className:g.imagePreview}):(0,d.jsx)("span",{children:x.name})})]}),(0,d.jsxs)("div",{className:g.sendMsgCont,children:[(0,d.jsxs)(l.A,{width:"100%",className:g.sendMsgInput,paddingLeft:"20px",placeholder:"Type something here...",value:h,handleChange:e=>_(e.target.value),children:[(0,d.jsx)("button",{type:"button",className:g.writeMsgButton,onClick:()=>{P.current.click()},children:(0,d.jsx)(r.EHs,{className:g.paperClipIcon,size:18})}),(0,d.jsx)("input",{type:"file",ref:P,onChange:e=>{const t=e.target.files[0];t&&C(t)},style:{display:"none"}}),(0,d.jsxs)("div",{className:g.emojiWrapper,children:[(0,d.jsx)("button",{type:"button",className:g.writeMsgButton,onClick:()=>{p((e=>!e))},children:(0,d.jsx)(r.kqk,{className:g.smileIcon,size:18})}),u&&(0,d.jsx)("div",{className:g.emojiPicker,children:(0,d.jsx)(m.Ay,{onEmojiClick:e=>{_((t=>t+e.emoji))}})})]})]}),(0,d.jsx)("button",{className:g.sendMsgButton,onClick:()=>{h.trim()&&(a((0,i.wi)({chatId:e,newMessages:[{id:crypto.randomUUID(),content:h,isInbox:!1,sentAt:(new Date).toISOString()}]})),_(""),p(!1),C(null))},children:(0,d.jsx)(r.Cer,{className:g.sendIcon,size:24})})]})]})}}}]);
//# sourceMappingURL=434.3cb641a0.chunk.js.map